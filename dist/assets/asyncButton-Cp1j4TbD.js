class o extends HTMLElement{constructor(){super(),this.storedAttributes={}}connectedCallback(){this.storeAttributes(),this.removeAttributes(),this.render(),this.addEventListeners()}storeAttributes(){var t;this.storedAttributes.ids=((t=this.getAttribute("ids"))==null?void 0:t.split(","))||[],this.storedAttributes.endpoint=this.getAttribute("endpoint"),this.storedAttributes.href=this.getAttribute("href"),this.storedAttributes.loadingText=this.getAttribute("loading")||"loading",this.storedAttributes.buttonClass=this.getAttribute("class")||""}disableButton(){this.querySelector("button").disabled=!0}validateForm(){return this.storedAttributes.ids.every(t=>{const s=document.getElementById(t);return s?s.reportValidity():!0})}async handleClick(){if(!this.validateForm())return;const t=this.querySelector("button"),s=t.textContent;t.textContent=this.storedAttributes.loadingText,this.disableButton();const r={};this.storedAttributes.ids.forEach(e=>{const i=document.getElementById(e);i&&(r[i.name]=i.value)});try{const e=await fetch(this.storedAttributes.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});setTimeout(()=>{e.ok?window.location.href=this.storedAttributes.href:window.location.reload()},1900)}catch(e){console.error("Error:",e),setTimeout(()=>{window.location.reload()},1900)}finally{setTimeout(()=>{t.textContent=s,t.disabled=!1},1900)}}addEventListeners(){this.querySelector("button").addEventListener("click",()=>this.handleClick())}render(){this.innerHTML=`
            <button class="${this.storedAttributes.buttonClass}">
                <slot></slot>
            </button>
        `}removeAttributes(){this.removeAttribute("endpoint"),this.removeAttribute("ids"),this.removeAttribute("href"),this.removeAttribute("loading"),this.removeAttribute("class")}}customElements.define("async-button",o);
